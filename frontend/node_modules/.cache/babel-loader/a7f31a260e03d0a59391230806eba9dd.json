{"ast":null,"code":"var _jsxFileName = \"/home/djole/Documents/fullstack/sluzba/frontend/src/components/Table/Filter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { HiFilter } from \"react-icons/hi\";\nimport FindParent from \"../../helpers/FindParent\";\nimport FilterField from \"./FilterField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Fields = ({\n  page,\n  filter,\n  setFilter\n}) => {\n  return page.fields.map(field => {\n    return /*#__PURE__*/_jsxDEV(IfTable, {\n      field: field,\n      filter: filter,\n      setFilter: setFilter\n    }, field.key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this);\n  });\n};\n\n_c = Fields;\n\nconst IfTable = ({\n  field,\n  filter,\n  setFilter\n}) => {\n  if (!field.table) return null;\n  const parent = FindParent(field);\n\n  if (parent) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(FilterField, {\n        filter: filter,\n        setFilter: setFilter,\n        field: field\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Fields, {\n        filter: filter,\n        setFilter: setFilter,\n        page: parent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(FilterField, {\n    filter: filter,\n    setFilter: setFilter,\n    field: field\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 10\n  }, this);\n};\n\n_c2 = IfTable;\n\nconst Filter = ({\n  page,\n  data,\n  defaultFilter,\n  setDisplayData,\n  filters\n}) => {\n  _s();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState(defaultFilter);\n  const handleFilter = useCallback(() => {\n    let newData = data;\n    filters.forEach(field => {\n      switch (field.type) {\n        case \"text\":\n          newData = newData.filter(fieldData => {\n            if (fieldData[field.key]) {\n              return fieldData[field.key].toLocaleLowerCase().search(filter[field.key].toLocaleLowerCase()) !== -1;\n            }\n\n            return null;\n          });\n          break;\n\n        case \"number\":\n          newData = newData.filter(fieldData => {\n            if (fieldData[field.key] >= filter[field.key].min && fieldData[field.key] <= filter[field.key].max) return fieldData;\n            return false;\n          });\n          break;\n\n        case \"select\":\n          newData = newData.filter(fieldData => {\n            if (filter[field.key] === 0 || fieldData[field.key] && fieldData[field.key].id === filter[field.key] || fieldData[field.key] === filter[field.key]) return fieldData;\n            return false;\n          });\n          break;\n\n        default:\n          return null;\n      }\n    });\n    return newData;\n  }, [filter, filters, data]); // const SubFilters = (page) => {\n  //   page.fields.map((field) => {\n  //     return handleSubFilter(field);\n  //   });\n  // };\n  // const handleSubFilter = (field) => {\n  //   if (!field.table) return null;\n  //   const parent = FindParent(field);\n  //   if (parent) {\n  //     // console.log(field);\n  //     return SubFilters(parent);\n  //   }\n  //   // console.log(field);\n  //   return field;\n  // };\n  // SubFilters(page);\n\n  useEffect(() => {\n    let newData = handleFilter();\n    setDisplayData(newData);\n  }, [setDisplayData, handleFilter]);\n\n  const handleMouseLeave = e => {\n    if (e.target.tagName.toLowerCase() !== \"select\" && e.target.tagName.toLowerCase() !== \"input\") {\n      setIsOpen(false);\n    }\n  };\n\n  const handleReport = () => {\n    axios.post(\"http://localhost:8000/reports/pages/projects/create/\", filter);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      // className=\"filter\"\n      onMouseEnter: () => setIsOpen(true),\n      onMouseLeave: e => handleMouseLeave(e),\n      style: {\n        padding: isOpen && \"2rem\",\n        margin: isOpen && \"2rem\",\n        marginInlineEnd: isOpen && \"0rem\",\n        // placeSelf: isOpen && \"center\",\n        border: !isOpen && \"none\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter\",\n        children: isOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Fields, {\n            page: page,\n            filter: filter,\n            setFilter: setFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleReport(),\n            children: \"Napravi izvje\\u0161taj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon\" // onMouseEnter={() => setIsOpen(true)}\n        // onMouseLeave={(e) => handleMouseLeave(e)}\n        // style={{ width: isOpen && \"44rem\" }}\n        ,\n        children: /*#__PURE__*/_jsxDEV(HiFilter, {\n          className: \"filter-icon\",\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"invisible\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Filter, \"LPXI+kcyw82wXb0PlxdDDPeoUh8=\");\n\n_c3 = Filter;\nexport default Filter;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Fields\");\n$RefreshReg$(_c2, \"IfTable\");\n$RefreshReg$(_c3, \"Filter\");","map":{"version":3,"sources":["/home/djole/Documents/fullstack/sluzba/frontend/src/components/Table/Filter.js"],"names":["React","useCallback","useEffect","useState","axios","HiFilter","FindParent","FilterField","Fields","page","filter","setFilter","fields","map","field","key","IfTable","table","parent","Filter","data","defaultFilter","setDisplayData","filters","isOpen","setIsOpen","handleFilter","newData","forEach","type","fieldData","toLocaleLowerCase","search","min","max","id","handleMouseLeave","e","target","tagName","toLowerCase","handleReport","post","padding","margin","marginInlineEnd","border"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\n\nimport axios from \"axios\";\n\nimport { HiFilter } from \"react-icons/hi\";\nimport FindParent from \"../../helpers/FindParent\";\nimport FilterField from \"./FilterField\";\n\nconst Fields = ({ page, filter, setFilter }) => {\n  return page.fields.map((field) => {\n    return (\n      <IfTable\n        key={field.key}\n        field={field}\n        filter={filter}\n        setFilter={setFilter}\n      />\n    );\n  });\n};\n\nconst IfTable = ({ field, filter, setFilter }) => {\n  if (!field.table) return null;\n  const parent = FindParent(field);\n  if (parent) {\n    return (\n      <>\n        <FilterField filter={filter} setFilter={setFilter} field={field} />\n        <Fields filter={filter} setFilter={setFilter} page={parent} />\n      </>\n    );\n  }\n  return <FilterField filter={filter} setFilter={setFilter} field={field} />;\n};\n\nconst Filter = ({ page, data, defaultFilter, setDisplayData, filters }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState(defaultFilter);\n\n  const handleFilter = useCallback(() => {\n    let newData = data;\n    filters.forEach((field) => {\n      switch (field.type) {\n        case \"text\":\n          newData = newData.filter((fieldData) => {\n            if (fieldData[field.key]) {\n              return (\n                fieldData[field.key]\n                  .toLocaleLowerCase()\n                  .search(filter[field.key].toLocaleLowerCase()) !== -1\n              );\n            }\n            return null;\n          });\n          break;\n        case \"number\":\n          newData = newData.filter((fieldData) => {\n            if (\n              fieldData[field.key] >= filter[field.key].min &&\n              fieldData[field.key] <= filter[field.key].max\n            )\n              return fieldData;\n            return false;\n          });\n          break;\n        case \"select\":\n          newData = newData.filter((fieldData) => {\n            if (\n              filter[field.key] === 0 ||\n              (fieldData[field.key] &&\n                fieldData[field.key].id === filter[field.key]) ||\n              fieldData[field.key] === filter[field.key]\n            )\n              return fieldData;\n            return false;\n          });\n          break;\n        default:\n          return null;\n      }\n    });\n    return newData;\n  }, [filter, filters, data]);\n\n  // const SubFilters = (page) => {\n  //   page.fields.map((field) => {\n  //     return handleSubFilter(field);\n  //   });\n  // };\n\n  // const handleSubFilter = (field) => {\n  //   if (!field.table) return null;\n  //   const parent = FindParent(field);\n  //   if (parent) {\n  //     // console.log(field);\n  //     return SubFilters(parent);\n  //   }\n  //   // console.log(field);\n  //   return field;\n  // };\n\n  // SubFilters(page);\n\n  useEffect(() => {\n    let newData = handleFilter();\n    setDisplayData(newData);\n  }, [setDisplayData, handleFilter]);\n\n  const handleMouseLeave = (e) => {\n    if (\n      e.target.tagName.toLowerCase() !== \"select\" &&\n      e.target.tagName.toLowerCase() !== \"input\"\n    ) {\n      setIsOpen(false);\n    }\n  };\n\n  const handleReport = () => {\n    axios.post(\"http://localhost:8000/reports/pages/projects/create/\", filter);\n  };\n\n  return (\n    <>\n      <div\n        // className=\"filter\"\n        onMouseEnter={() => setIsOpen(true)}\n        onMouseLeave={(e) => handleMouseLeave(e)}\n        style={{\n          padding: isOpen && \"2rem\",\n          margin: isOpen && \"2rem\",\n          marginInlineEnd: isOpen && \"0rem\",\n          // placeSelf: isOpen && \"center\",\n          border: !isOpen && \"none\",\n        }}\n      >\n        <div className=\"filter\">\n          {isOpen && (\n            <>\n              <Fields page={page} filter={filter} setFilter={setFilter} />\n              <button onClick={() => handleReport()}>Napravi izvje≈°taj</button>\n            </>\n          )}\n        </div>\n        <div\n          className=\"icon\"\n          // onMouseEnter={() => setIsOpen(true)}\n          // onMouseLeave={(e) => handleMouseLeave(e)}\n          // style={{ width: isOpen && \"44rem\" }}\n        >\n          <HiFilter className=\"filter-icon\" size={40} />\n        </div>\n        <div className=\"invisible\"></div>\n      </div>\n    </>\n  );\n};\n\nexport default Filter;\n"]},"metadata":{},"sourceType":"module"}