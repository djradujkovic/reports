{"ast":null,"code":"var _jsxFileName = \"/home/djole/Documents/fullstack/training/frontend2/src/components/Table/Filter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { HiFilter } from \"react-icons/hi\";\nimport FindParent from \"../../helpers/FindParent\";\nimport FilterField from \"./FilterField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Fields = ({\n  page,\n  filter,\n  setFilter\n}) => {\n  return page.fields.map(field => {\n    return /*#__PURE__*/_jsxDEV(IfTable, {\n      field: field,\n      filter: filter,\n      setFilter: setFilter\n    }, field.key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this);\n  });\n};\n\n_c = Fields;\n\nconst IfTable = ({\n  field,\n  filter,\n  setFilter\n}) => {\n  if (!field.table) return null;\n  const parent = FindParent(field);\n\n  if (parent) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(FilterField, {\n        filter: filter,\n        setFilter: setFilter,\n        field: field\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Fields, {\n        filter: filter,\n        setFilter: setFilter,\n        page: parent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(FilterField, {\n    filter: filter,\n    setFilter: setFilter,\n    field: field\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 10\n  }, this);\n};\n\n_c2 = IfTable;\n\nconst Filter = ({\n  page,\n  data,\n  defaultFilter,\n  setDisplayData,\n  filters\n}) => {\n  _s();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState(defaultFilter);\n  const handleFilter = useCallback(() => {\n    let newData = data;\n    filters.forEach(field => {\n      switch (field.type) {\n        case \"text\":\n          newData = newData.filter(fieldData => {\n            if (!fieldData[field.key]) return null;\n            return fieldData[field.key].toLowerCase().search(filter[field.key].toLowerCase() !== 1);\n          });\n          break;\n\n        case \"number\":\n          newData = newData.filter(fieldData => {\n            if (fieldData[field.key] >= filter[field.key].min && fieldData[field.key] <= filter[field.key].max) return fieldData;\n            return false;\n          });\n          break;\n\n        case \"select\":\n          newData = newData.filter(fieldData => {\n            if (filter[field.key] === 0 || fieldData[field.key] && fieldData[field.key].id === filter[field.key] || fieldData[field.key] === filter[field.key]) return fieldData;\n            return false;\n          });\n          break;\n\n        default:\n          return null;\n      }\n    });\n    return newData;\n  }, [filter, filters, data]); // const SubFilters = (page) => {\n  //   page.fields.map((field) => {\n  //     return handleSubFilter(field);\n  //   });\n  // };\n  // const handleSubFilter = (field) => {\n  //   if (!field.table) return null;\n  //   const parent = FindParent(field);\n  //   if (parent) {\n  //     // console.log(field);\n  //     return SubFilters(parent);\n  //   }\n  //   // console.log(field);\n  //   return field;\n  // };\n  // SubFilters(page);\n\n  useEffect(() => {\n    let newData = handleFilter();\n    setDisplayData(newData);\n  }, [setDisplayData, handleFilter]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter\",\n      onMouseUp: () => setIsOpen(true),\n      onMouseLeave: () => setIsOpen(false),\n      style: {\n        padding: isOpen && \"1rem\"\n      },\n      children: isOpen ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Fields, {\n          page: page,\n          filter: filter,\n          setFilter: setFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Napravi izvje\\u0161taj\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(HiFilter, {\n        className: \"icon\",\n        size: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Filter, \"LPXI+kcyw82wXb0PlxdDDPeoUh8=\");\n\n_c3 = Filter;\nexport default Filter;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Fields\");\n$RefreshReg$(_c2, \"IfTable\");\n$RefreshReg$(_c3, \"Filter\");","map":{"version":3,"sources":["/home/djole/Documents/fullstack/training/frontend2/src/components/Table/Filter.js"],"names":["React","useCallback","useEffect","useState","HiFilter","FindParent","FilterField","Fields","page","filter","setFilter","fields","map","field","key","IfTable","table","parent","Filter","data","defaultFilter","setDisplayData","filters","isOpen","setIsOpen","handleFilter","newData","forEach","type","fieldData","toLowerCase","search","min","max","id","padding"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { HiFilter } from \"react-icons/hi\";\nimport FindParent from \"../../helpers/FindParent\";\nimport FilterField from \"./FilterField\";\n\nconst Fields = ({ page, filter, setFilter }) => {\n  return page.fields.map((field) => {\n    return (\n      <IfTable\n        key={field.key}\n        field={field}\n        filter={filter}\n        setFilter={setFilter}\n      />\n    );\n  });\n};\n\nconst IfTable = ({ field, filter, setFilter }) => {\n  if (!field.table) return null;\n  const parent = FindParent(field);\n  if (parent) {\n    return (\n      <>\n        <FilterField filter={filter} setFilter={setFilter} field={field} />\n        <Fields filter={filter} setFilter={setFilter} page={parent} />\n      </>\n    );\n  }\n  return <FilterField filter={filter} setFilter={setFilter} field={field} />;\n};\n\nconst Filter = ({ page, data, defaultFilter, setDisplayData, filters }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState(defaultFilter);\n\n  const handleFilter = useCallback(() => {\n    let newData = data;\n    filters.forEach((field) => {\n      switch (field.type) {\n        case \"text\":\n          newData = newData.filter((fieldData) => {\n            if (!fieldData[field.key]) return null;\n            return fieldData[field.key]\n              .toLowerCase()\n              .search(filter[field.key].toLowerCase() !== 1);\n          });\n          break;\n        case \"number\":\n          newData = newData.filter((fieldData) => {\n            if (\n              fieldData[field.key] >= filter[field.key].min &&\n              fieldData[field.key] <= filter[field.key].max\n            )\n              return fieldData;\n            return false;\n          });\n          break;\n        case \"select\":\n          newData = newData.filter((fieldData) => {\n            if (\n              filter[field.key] === 0 ||\n              (fieldData[field.key] &&\n                fieldData[field.key].id === filter[field.key]) ||\n              fieldData[field.key] === filter[field.key]\n            )\n              return fieldData;\n            return false;\n          });\n          break;\n        default:\n          return null;\n      }\n    });\n    return newData;\n  }, [filter, filters, data]);\n\n  // const SubFilters = (page) => {\n  //   page.fields.map((field) => {\n  //     return handleSubFilter(field);\n  //   });\n  // };\n\n  // const handleSubFilter = (field) => {\n  //   if (!field.table) return null;\n  //   const parent = FindParent(field);\n  //   if (parent) {\n  //     // console.log(field);\n  //     return SubFilters(parent);\n  //   }\n  //   // console.log(field);\n  //   return field;\n  // };\n\n  // SubFilters(page);\n\n  useEffect(() => {\n    let newData = handleFilter();\n    setDisplayData(newData);\n  }, [setDisplayData, handleFilter]);\n\n  return (\n    <>\n      <div\n        className=\"filter\"\n        onMouseUp={() => setIsOpen(true)}\n        onMouseLeave={() => setIsOpen(false)}\n        style={{ padding: isOpen && \"1rem\" }}\n      >\n        {isOpen ? (\n          <>\n            <Fields page={page} filter={filter} setFilter={setFilter} />\n            <button>Napravi izvje≈°taj</button>\n          </>\n        ) : (\n          <HiFilter className=\"icon\" size={40} />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Filter;\n"]},"metadata":{},"sourceType":"module"}